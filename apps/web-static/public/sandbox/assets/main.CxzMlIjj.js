import{P as a}from"./phaser.m-zbJ2tx.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();class h extends a.Scene{constructor(){super({key:"MenuScene"})}create(){this.createStarfield(),this.add.text(400,200,"ASTEROID SHOOTER",{fontSize:"48px",fill:"#ffffff",fontFamily:"Arial, sans-serif",stroke:"#000000",strokeThickness:2}).setOrigin(.5),this.add.text(400,280,"Destroy asteroids and survive as long as you can!",{fontSize:"20px",fill:"#cccccc",fontFamily:"Arial, sans-serif"}).setOrigin(.5),this.add.text(400,320,`• Shoot asteroids to earn points
• Avoid collisions to preserve lives
• Game gets faster as you progress`,{fontSize:"16px",fill:"#aaaaaa",fontFamily:"Arial, sans-serif",align:"center"}).setOrigin(.5);const e=this.add.graphics();e.fillStyle(4886754),e.fillRoundedRect(-100,-25,200,50,8),e.x=400,e.y=420,e.setInteractive(new a.Geom.Rectangle(-100,-25,200,50),a.Geom.Rectangle.Contains),this.add.text(400,420,"PLAY GAME",{fontSize:"24px",fill:"#ffffff",fontFamily:"Arial, sans-serif"}).setOrigin(.5),e.on("pointerover",()=>{e.clear(),e.fillStyle(7059199),e.fillRoundedRect(-100,-25,200,50,8),this.game.canvas.style.cursor="pointer"}),e.on("pointerout",()=>{e.clear(),e.fillStyle(4886754),e.fillRoundedRect(-100,-25,200,50,8),this.game.canvas.style.cursor="default"}),e.on("pointerdown",()=>{this.scene.start("GameScene")}),this.add.text(400,520,"Use ARROW KEYS or WASD to move, SPACE to shoot",{fontSize:"16px",fill:"#888888",fontFamily:"Arial, sans-serif"}).setOrigin(.5),this.add.text(400,540,"Press SPACE or click PLAY GAME to start",{fontSize:"14px",fill:"#666666",fontFamily:"Arial, sans-serif"}).setOrigin(.5),this.spaceKey=this.input.keyboard.addKey(a.Input.Keyboard.KeyCodes.SPACE),console.log("MenuScene created successfully")}createStarfield(){const e=this.add.graphics();e.fillStyle(17),e.fillRect(0,0,800,600);for(let t=0;t<100;t++){const s=Math.random()*800,i=Math.random()*600,o=Math.random()>.8?2:1;e.fillStyle(16777215),e.fillRect(s,i,o,o)}}update(){a.Input.Keyboard.JustDown(this.spaceKey)&&this.scene.start("GameScene")}}class y extends a.Scene{constructor(){super({key:"GameScene"}),this.score=0,this.lives=3,this.asteroidTimer=0,this.asteroidDelay=2e3,this.lastShotTime=0,this.shotDelay=200}preload(){this.add.graphics().fillStyle(65280).fillTriangle(10,0,0,20,20,20).generateTexture("player",20,20),this.add.graphics().fillStyle(16776960).fillRect(0,0,4,16).generateTexture("bullet",4,16),this.add.graphics().fillStyle(9127187).fillCircle(25,25,25).fillStyle(6636321).fillCircle(15,15,8).fillCircle(35,20,6).generateTexture("asteroid",50,50)}create(){this.createStarfield(),this.player=this.physics.add.sprite(400,500,"player"),this.player.setCollideWorldBounds(!0),this.player.setDrag(300),this.player.body.setSize(16,16),this.bullets=this.physics.add.group({defaultKey:"bullet",maxSize:20}),this.asteroids=this.physics.add.group({defaultKey:"asteroid",maxSize:15}),this.cursors=this.input.keyboard.createCursorKeys(),this.spaceKey=this.input.keyboard.addKey(a.Input.Keyboard.KeyCodes.SPACE),this.wasd=this.input.keyboard.addKeys("W,S,A,D"),this.physics.add.overlap(this.bullets,this.asteroids,this.hitAsteroid,null,this),this.physics.add.overlap(this.player,this.asteroids,this.hitPlayer,null,this),this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"24px",fill:"#ffffff",fontFamily:"Arial, sans-serif"}),this.livesText=this.add.text(16,50,"Lives: 3",{fontSize:"24px",fill:"#ffffff",fontFamily:"Arial, sans-serif"}),this.add.text(400,580,"Use arrow keys to move • Space to shoot • ESC to pause",{fontSize:"16px",fill:"#888888",fontFamily:"Arial, sans-serif"}).setOrigin(.5),this.asteroidTimer=this.time.now+this.asteroidDelay,this.escKey=this.input.keyboard.addKey(a.Input.Keyboard.KeyCodes.ESC),this.isPaused=!1,this.rKey=this.input.keyboard.addKey(a.Input.Keyboard.KeyCodes.R),console.log("GameScene created successfully with sprites")}createStarfield(){const e=this.add.graphics();e.fillStyle(17),e.fillRect(0,0,800,600);for(let t=0;t<150;t++){const s=Math.random()*800,i=Math.random()*600,o=Math.random()>.8?2:1,r=Math.random()>.5?16777215:13421772;e.fillStyle(r),e.fillRect(s,i,o,o)}}update(){if(a.Input.Keyboard.JustDown(this.escKey)&&this.togglePause(),a.Input.Keyboard.JustDown(this.rKey)&&this.scene.restart(),this.isPaused)return;const e=300;let t=0,s=0;this.cursors.left.isDown||this.wasd.A.isDown?t=-e:(this.cursors.right.isDown||this.wasd.D.isDown)&&(t=e),this.cursors.up.isDown||this.wasd.W.isDown?s=-e:(this.cursors.down.isDown||this.wasd.S.isDown)&&(s=e),this.player.setVelocity(t,s),this.spaceKey.isDown&&this.time.now>this.lastShotTime+this.shotDelay&&(this.shootBullet(),this.lastShotTime=this.time.now),this.time.now>this.asteroidTimer&&(this.spawnAsteroid(),this.asteroidTimer=this.time.now+this.asteroidDelay,this.asteroidDelay>800&&(this.asteroidDelay-=100)),this.bullets.children.entries.forEach(i=>{i.y<-50&&i.destroy()}),this.asteroids.children.entries.forEach(i=>{i.y>650&&i.destroy()})}shootBullet(){const e=this.bullets.get(this.player.x,this.player.y-20);e&&(e.setActive(!0),e.setVisible(!0),e.body.enable=!0,e.setVelocityY(-500),e.body.setSize(4,16),console.log("Bullet fired at:",e.x,e.y,"Velocity Y:",e.body.velocity.y))}spawnAsteroid(){const e=a.Math.Between(50,750),t=this.asteroids.get(e,-50);if(t){t.setActive(!0),t.setVisible(!0),t.body.enable=!0;const s=a.Math.FloatBetween(.5,1.5);t.setScale(s),t.asteroidSize=25*s,t.setVelocityY(a.Math.Between(100,250)),t.setAngularVelocity(a.Math.Between(-200,200)),t.body.setSize(40*s,40*s),console.log("Asteroid spawned at:",t.x,t.y,"Scale:",s,"Velocity Y:",t.body.velocity.y)}}hitAsteroid(e,t){this.createExplosion(t.x,t.y,16737792),e.setActive(!1),e.setVisible(!1),e.body.enable=!1,t.setActive(!1),t.setVisible(!1),t.body.enable=!1;const s=Math.max(10,Math.floor(60-(t.asteroidSize||25)));this.score+=s,this.scoreText.setText("Score: "+this.score),console.log("Asteroid hit! Points:",s,"Total Score:",this.score)}hitPlayer(e,t){e.invincible||(this.createExplosion(e.x,e.y,16711680),t.setActive(!1),t.setVisible(!1),t.body.enable=!1,this.lives-=1,this.livesText.setText("Lives: "+this.lives),e.setTint(16711680),e.invincible=!0,this.time.delayedCall(300,()=>{e.clearTint()}),this.time.delayedCall(1500,()=>{e.invincible=!1}),this.lives<=0&&this.scene.start("GameOverScene",{score:this.score}),console.log("Player hit! Lives:",this.lives))}createExplosion(e,t,s=16737792){for(let i=0;i<8;i++){const o=this.add.rectangle(e,t,4,4,s),r=i/8*Math.PI*2+(Math.random()-.5)*.5,n=a.Math.Between(50,150),f=Math.cos(r)*n,d=Math.sin(r)*n;this.tweens.add({targets:o,x:o.x+f,y:o.y+d,alpha:0,scaleX:.1,scaleY:.1,duration:600,onComplete:()=>o.destroy()})}}togglePause(){this.isPaused=!this.isPaused,this.isPaused?(this.physics.pause(),this.pauseText=this.add.text(400,300,`PAUSED

Press ESC to resume
Press R to restart`,{fontSize:"32px",fill:"#ffffff",fontFamily:"Arial, sans-serif",align:"center",backgroundColor:"#000000",padding:{x:30,y:20}}).setOrigin(.5)):(this.physics.resume(),this.pauseText&&(this.pauseText.destroy(),this.pauseText=null))}}class u extends a.Scene{constructor(){super({key:"GameOverScene"})}init(e){this.finalScore=e.score||0}create(){this.createStarfield(),this.add.text(400,150,"GAME OVER",{fontSize:"64px",fill:"#ff0000",fontFamily:"Arial, sans-serif",stroke:"#000000",strokeThickness:3}).setOrigin(.5),this.add.text(400,250,`Final Score: ${this.finalScore}`,{fontSize:"32px",fill:"#ffffff",fontFamily:"Arial, sans-serif",stroke:"#000000",strokeThickness:2}).setOrigin(.5);const e=this.getHighScore();this.finalScore>e?(this.setHighScore(this.finalScore),this.add.text(400,300,"NEW HIGH SCORE!",{fontSize:"24px",fill:"#ffff00",fontFamily:"Arial, sans-serif",stroke:"#000000",strokeThickness:2}).setOrigin(.5)):this.add.text(400,300,`High Score: ${e}`,{fontSize:"24px",fill:"#cccccc",fontFamily:"Arial, sans-serif"}).setOrigin(.5);const t=this.add.graphics();t.fillStyle(4886754),t.fillRoundedRect(-100,-25,200,50,8),t.x=300,t.y=400,t.setInteractive(new a.Geom.Rectangle(-100,-25,200,50),a.Geom.Rectangle.Contains),this.add.text(300,400,"PLAY AGAIN",{fontSize:"20px",fill:"#ffffff",fontFamily:"Arial, sans-serif"}).setOrigin(.5);const s=this.add.graphics();s.fillStyle(15158332),s.fillRoundedRect(-100,-25,200,50,8),s.x=500,s.y=400,s.setInteractive(new a.Geom.Rectangle(-100,-25,200,50),a.Geom.Rectangle.Contains),this.add.text(500,400,"MAIN MENU",{fontSize:"20px",fill:"#ffffff",fontFamily:"Arial, sans-serif"}).setOrigin(.5),t.on("pointerover",()=>{t.clear(),t.fillStyle(7059199),t.fillRoundedRect(-100,-25,200,50,8),this.game.canvas.style.cursor="pointer"}),t.on("pointerout",()=>{t.clear(),t.fillStyle(4886754),t.fillRoundedRect(-100,-25,200,50,8),this.game.canvas.style.cursor="default"}),s.on("pointerover",()=>{s.clear(),s.fillStyle(16739179),s.fillRoundedRect(-100,-25,200,50,8),this.game.canvas.style.cursor="pointer"}),s.on("pointerout",()=>{s.clear(),s.fillStyle(15158332),s.fillRoundedRect(-100,-25,200,50,8),this.game.canvas.style.cursor="default"}),t.on("pointerdown",()=>{this.scene.start("GameScene")}),s.on("pointerdown",()=>{this.scene.start("MenuScene")}),this.add.text(400,500,"Press R to restart or M for menu",{fontSize:"16px",fill:"#888888",fontFamily:"Arial, sans-serif"}).setOrigin(.5),this.rKey=this.input.keyboard.addKey(a.Input.Keyboard.KeyCodes.R),this.mKey=this.input.keyboard.addKey(a.Input.Keyboard.KeyCodes.M),console.log("GameOverScene created successfully")}createStarfield(){const e=this.add.graphics();e.fillStyle(17),e.fillRect(0,0,800,600);for(let t=0;t<100;t++){const s=Math.random()*800,i=Math.random()*600,o=Math.random()>.8?2:1;e.fillStyle(16777215),e.fillRect(s,i,o,o)}}update(){a.Input.Keyboard.JustDown(this.rKey)&&this.scene.start("GameScene"),a.Input.Keyboard.JustDown(this.mKey)&&this.scene.start("MenuScene")}getHighScore(){try{return parseInt(localStorage.getItem("compify-asteroid-highscore")||"0")}catch(e){return 0}}setHighScore(e){try{localStorage.setItem("compify-asteroid-highscore",e.toString())}catch(t){}}}if(typeof window=="undefined")throw new Error("This game requires a browser environment and cannot run server-side");const p={type:a.AUTO,width:800,height:600,parent:"game-container",backgroundColor:"#0a0a0a",physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[h,y,u],scale:{mode:a.Scale.FIT,autoCenter:a.Scale.CENTER_BOTH,width:800,height:600},disableContextMenu:!0,audio:{disableWebAudio:!1,noAudio:!1},render:{antialias:!1,pixelArt:!1,roundPixels:!0},dom:{createContainer:!1}};let c;try{c=new a.Game(p),c.events.on("ready",()=>{console.log("Compify Game Sandbox loaded successfully")})}catch(l){console.error("Failed to initialize game:",l);const e=document.getElementById("game-container");e&&(e.innerHTML=`
            <div style="
                width: 800px; 
                height: 600px; 
                display: flex; 
                align-items: center; 
                justify-content: center; 
                background: #0a0a0a; 
                color: #ffffff; 
                font-family: Arial, sans-serif;
                text-align: center;
                border-radius: 8px;
            ">
                <div>
                    <h2>Game Loading Error</h2>
                    <p>Unable to initialize the game engine.</p>
                    <p>Please refresh the page or try a different browser.</p>
                </div>
            </div>
        `)}
